# 14.1 방화벽 소개
> 리눅스 방화벽은 외부의 네트워크에서 내부의 시스템으로 접근하는 네트워크 패킷을 차단하는 서비스
- 허락해준 규칙 외에 기본적으로는 모두 deny
- iptables / firewalld(권장)가 있음

## 14.1.1 firewalld
- iptables의 한계와 단점을 보완하는 방화벽 서비스
- 동적으로 방화벽 설정을 변경할 수 있어서 수시로 변하는 네트워크 변화에 대해 제한없이 대응할 수 있음
- XML 파일 형태로 보관
- Runtime(실행 중) 및 Permanent(영구) 설정
- 사전에 정의된 영역(Pre-defined Zone)
- 사전에 정의된 서비스(Pre-defined Service)
- D-Bus 사용

```
[vagrant@user01 ~]$ systemctl status firewalld.service
● firewalld.service - firewalld - dynamic firewall daemon
     Loaded: loaded (/usr/lib/systemd/system/firewalld.service; enabled; preset: enabled)
     Active: active (running) since Fri 2025-10-31 13:40:15 KST; 1h 24min ago
       Docs: man:firewalld(1)
   Main PID: 595 (firewalld)
      Tasks: 2 (limit: 5769)
     Memory: 45.0M
        CPU: 540ms
     CGroup: /system.slice/firewalld.service
             └─595 /usr/bin/python3 -s /usr/sbin/firewalld --nofork --nopid

[vagrant@user01 ~]$ curl -I localhost
HTTP/1.1 403 Forbidden
...
```

```
[vagrant@user01 ~]$ sudo firewall-cmd --add-service=http
success

[vagrant@user01 ~]$ sudo firewall-cmd --list-all
public (active)
  target: default
  icmp-block-inversion: no
  interfaces: enp0s3 enp0s8
  sources: 
  services: cockpit dhcpv6-client http ssh # http 추가 완료
  ...

[vagrant@user01 ~]$ sudo firewall-cmd --remove-service=http
success

[vagrant@user01 ~]$ sudo firewall-cmd --list-all
public (active)
  target: default
  icmp-block-inversion: no
  interfaces: enp0s3 enp0s8
  sources: 
  services: cockpit dhcpv6-client ssh # http 삭제 완료
  

[vagrant@user01 ~]$ sudo systemctl restart firewalld # 재시작하면 정보가 사라짐
[vagrant@user01 ~]$ sudo firewall-cmd --add-service=http --permanent # 영구히 저장
success
[vagrant@user01 ~]$ sudo firewall-cmd --reload # reload해야 반영됨
success
```
