# 10.1 RPM (Redhat Package Manager)을 사용하여 패키지 관리
## 10.1.1 RPM
- 패키지 관리 도구로, 리눅스 사용자들이 보다 쉽게 소프트웨어 설치를 할 수 있도록 레드햇(RedHat)에서 개발한 방식
- 저수준의 도구로서 직접 패키지 파일을 소유하고 있거나, RPM 파일의 네트워크 위치를 지정해야 패키지 설치가 가능
- 패키지 파일을 소유하고 있다 하더라도 종속성으로 인하여 패키지 설치가 진행되지 않거나, 설치가 완료되어도 정상적으로 실행되지 않을 수 있음
> rpm -q [query-option] [query-argument]

|쿼리 옵션|내용|
|---|---|
|-a|모든 패키지 확인|
|-f|해당 파일이나 디렉터리가 포함된 패키지 확인|
|-c|설정 파일 확인|
|-d|문서 파일 확인|
|-i|자세한 정보 확인|
|-l|파일 목록 확인|
|-s|파일 상태 확인|
|-R|종속성 패키지 확인|

```
[vagrant@user01 ~]$ rpm -q -a # 설치되어 있는 모든 패키지 확인
...
httpd-tools-2.4.62-4.el9_6.4.x86_64
httpd-filesystem-2.4.62-4.el9_6.4.noarch
...
[vagrant@user01 ~]$ rpm -q -f /usr/sbin/httpd # 실행 파일 정보 확인
httpd-core-2.4.62-4.el9_6.4.x86_64

[vagrant@user01 ~]$ rpm -q -c httpd # 설정 파일 확인
/etc/httpd/conf.modules.d/00-brotli.conf
/etc/httpd/conf.modules.d/00-systemd.conf

[vagrant@user01 ~]$ rpm -q -l httpd # 파일 목록 확인
/usr/share/man/man8/rotatelogs.8.gz
/usr/share/man/man8/suexec.8.gz
...

[vagrant@user01 ~]$ rpm -q -i httpd # 자세한 정보 확인
Name        : httpd
Version     : 2.4.62
Release     : 4.el9_6.4
...

[vagrant@user01 ~]$ rpm -q -R httpd # httpd를 설치하기 위한 종속성 패키지들
...
httpd-core = 0:2.4.62-4.el9_6.4
libbrotlienc.so.1()(64bit)
libc.so.6()(64bit)
...
```
# 10.2 YUM (Yellowdog Updater Modified)을 사용하여 패키지 관리
## 10.2.1 YUM
- RPM 기반의 패키지 설치, 제거, 업데이트를 관리하는 도구
- 고수준 도구로, 패키지의 종속성을 해결하여 패키지를 더 쉽게 설치할 수 있음
- 리포지토리(Repository)라고 불리는 저장소에 패키지들을 저장하고 관리하기 때문에 업데이트도 쉽게 진행 가능
### YUM 저장소 (리포지토리, repository)
- YUM 저장소는 패키지들을 저장해놓은 하나의 서버를 의미
- YUM은 저장소에 접근해서 원하는 패키지에 대한 정보를 받아오거나 패키지를 다운로드 받아 설치
- `yum` 명령을 사용하여 YUM 저장소에 접근하려면 YUM 저장소의 정보를 저장하고 있는 설정 파일이 필요
- YUM 저장소에 연결할 수 있도록 설정한 파일은 `/etc/yum.repos.d` 디렉터리에 저장되어 있어야 하며, 반드시 `.repo` 확장자를 사용해야 함
```
[vagrant@user01 ~]$ ls -l /etc/yum.repos.d/
total 20
-rw-r--r--. 1 root root 6610 Nov  1  2024 rocky-addons.repo
-rw-r--r--. 1 root root 1165 Nov  1  2024 rocky-devel.repo
-rw-r--r--. 1 root root 2387 Nov  1  2024 rocky-extras.repo
-rw-r--r--. 1 root root 3417 Nov  1  2024 rocky.repo
[vagrant@user01 ~]$ vi /etc/yum.repos.d/rocky.repo
...
[baseos]
name=Rocky Linux $releasever - BaseOS
mirrorlist=https://mirrors.rockylinux.org/mirrorlist?arch=$basearch&repo=BaseOS-$releasever$rltype
#baseurl=http://dl.rockylinux.org/$contentdir/$releasever/BaseOS/$basearch/os/
...

[vagrant@user01 ~]$ yum repolist
repo id                                                                                       repo name
appstream                                                                                     Rocky Linux 9 - AppStream
baseos                                                                                        Rocky Linux 9 - BaseOS
extras                                                                                        Rocky Linux 9 - Extras
```
## 10.2.2 YUM 패키지 정보 확인
> yum subcommand [argument]

### info
- 해당 패키지의 상세 정보 확인 가능
- 패키지의 이름, 버전, 릴리즈 버전, 아키텍처 뿐만 아니라 패키지 파일의 크기와 설치 유무와 같은 정보도 제공됨

```
[vagrant@user01 ~]$ sudo yum info httpd # 패키지 정보 확인
Last metadata expiration check: 0:26:35 ago on Wed 29 Oct 2025 03:16:10 AM UTC.
Installed Packages
Name         : httpd
Version      : 2.4.62
Release      : 4.el9_6.4
...
```
### yum.repos.d/*.repo 파일들 삭제
```
[vagrant@user01 ~]$ sudo cp /etc/yum.repos.d/*.repo /tmp
[vagrant@user01 ~]$ sudo rm /etc/yum.repos.d/*.repo
[vagrant@user01 ~]$ sudo yum clean all

[vagrant@user01 ~]$ sudo yum info httpd 
Installed Packages # 서버로부터 최신 정보를 못 받아옴
Name         : httpd
Version      : 2.4.62
Release      : 4.el9_6.4

[vagrant@user01 ~]$ sudo install httpd # repository 활성화가 안 되어 있기 때문에
install: missing destination file operand after 'httpd'
Try 'install --help' for more information.

[vagrant@user01 ~]$ sudo cp /tmp/*.repo /etc/yum.repos.d/
[vagrant@user01 ~]$ ls /etc/yum.repos.d/
rocky-addons.repo  rocky-devel.repo  rocky-extras.repo  rocky.repo

[vagrant@user01 ~]$ sudo yum install httpd
Rocky Linux 9 - BaseOS                                                                                                                                                      1.8 MB/s | 2.5 MB     00:01    
Rocky Linux 9 - AppStream                                                                                                                                                   4.6 MB/s | 9.5 MB     00:02    
Rocky Linux 9 - Extras                                                                                                                                                       15 kB/s |  17 kB     00:01    
Package httpd-2.4.62-4.el9_6.4.x86_64 is already installed.
Dependencies resolved.
Nothing to do.
Complete!
```
### 기타 명령어
```
yum search apache # apache 키워드를 사용하여 패키지 검색
yum list # 패키지 목록 확인
```
